# This is the main configuration file for the application.
# https://www.playframework.com/documentation/latest/ConfigFile

db.default.driver=org.sqlite.JDBC
//db.default.url="jdbc:sqlite:app/temp.db"
db.default.url="jdbc:sqlite:conf/temp.db"
ebean.default = [ "models.*" ]

db.test.driver=org.sqlite.JDBC
//db.test.url="jdbc:sqlite:test/test.db"
db.test.url="jdbc:sqlite:conf/test.db"
ebean.test = [ "models.*" ]


# Temporary fix to Bad Request while hosting the server on cmpt373-1177e.cmpt.sfu.ca
play.filters.enabled=[play.filters.hosts.AllowedHostsFilter]

play.filters.hosts {
  allowed=[".", "localhost:9000", "127.0.0.1:9000"]
}

play.http.filters = "auth.Filters"

# Evolutions
play.evolutions.db.default.autoApply = true
play.evolutions.db.test.autoApply = true



pac4j.security.rules = [
  # 'Catch all' rule to make sure the whole application stays secure.
  {"/" = {
    authorizers = "_authenticated_"
    clients = "CasClient"
  }}
]

play.modules.enabled += "auth.SecurityModule"

// needed for production deployment: see https://www.playframework.com/documentation/2.6.x/ApplicationSecret
//// todo: use something more secure like below.
//play.http.secret.key="changeme"
//play.http.secret.key=${?APPLICATION_SECRET} //APPLICATION_SECRETE will be an env var set on the server

play.http.secret.key="58jlL4xoFz:_y6ZcW3kxqXkfv[hf1fGW5b_PQ7amPYt@c[3n019[1XtCs7o>WW3c"

# Play uses the Akka Http Server.
# https://www.playframework.com/documentation/2.6.x/AkkaHttpServer

# this setting will only work in production mode.
# i.e `sbt stage` or `sbt dist`
play.server.http {

  # use default http port - so no need to enter port in url
  # you might need to start the server with `sudo` because binding to
  # lower port #s is disabled by default on some systems.
  port = 80

  # The interface address to bind to
  # - 0.0.0.0 => apps (like browsers) from other hosts can access our server
  # - 127.0.0.1 => only apps on the same machine as our server have access.
  address = "0.0.0.0"
}